const data = [{
  abilities: ['Blaze'],
  name: 'Typhlosion',
  description: 'Typhlosion obscures itself behind a shimmering heat haze that it creates using its intensely hot flames. This Pokémon creates blazing explosive blasts that burn everything to cinders.',
  height: 5.07,
  weight: 175.3,
  category: 'Volcano',
  hp: 33.33,
  speed: 40,
  attack: 33.33,
  defense: 33.33,
  image: '1607845340286.png'
}, {
  abilities: ['Torrent'],
  name: 'Totodile',
  description: 'Despite the smallness of its body, Totodile’s jaws are very powerful. While the Pokémon may think it is just playfully nipping, its bite has enough power to cause serious injury.',
  height: 2,
  weight: 20.9,
  category: 'Big Jaw',
  hp: 20,
  speed: 20,
  attack: 26.67,
  defense: 26.67,
  image: '1607845620350.png'
}, {
  abilities: ['Natural cure', 'Frisk'],
  name: 'Phantump',
  description: 'After a lost child perished in the forest, their spirit possessed a tree stump, causing the spirit’s rebirth as this Pokémon.',
  height: 1.04,
  weight: 15.4,
  category: 'Stump',
  hp: 20,
  speed: 20,
  attack: 33.33,
  defense: 20,
  image: '708.png'
}, {
  abilities: ['Natural cure', 'Frisk'],
  name: 'Trevenant',
  description: 'People fear it due to a belief that it devours any who try to cut down trees in its forest, but to the Pokémon it shares its woods with, it’s kind.',
  height: 1.04,
  weight: 15.4,
  category: 'Elder tree',
  hp: 33.33,
  speed: 26.67,
  attack: 46.67,
  defense: 33.33,
  image: '709.png'
}, {
  abilities: ['Pickup', 'Frisk'],
  name: 'Pumpkaboo',
  description: 'Spirits that wander this world are placed into Pumpkaboo’s body. They’re then moved on to the afterlife.',
  height: 1.04,
  weight: 11.0,
  category: 'Pumpkin',
  hp: 20,
  speed: 20,
  attack: 26.67,
  defense: 33.33,
  image: '710.png'
}, {
  abilities: ['Pickup', 'Frisk'],
  name: 'Gourgeist',
  description: 'Eerie cries emanate from its body in the dead of night. The sounds are said to be the wails of spirits who are suffering in the afterlife.',
  height: 1.11,
  weight: 27.6,
  category: 'Pumpkin',
  hp: 26.67,
  speed: 33.33,
  attack: 40,
  defense: 53.33,
  image: '711.png'
}, {
  abilities: ['Own tempo', 'Ice body'],
  name: 'Bergmite',
  description: 'They chill the air around them to −150 degrees Fahrenheit, freezing the water in the air into ice that they use as armor.',
  height: 3.03,
  weight: 219.4,
  category: 'Ice chunk',
  hp: 20,
  speed: 10,
  attack: 33.33,
  defense: 33.33,
  image: '712.png'
}, {
  abilities: ['Own tempo', 'Ice body'],
  name: 'Avalugg',
  description: 'At high latitudes, this Pokémon can be found with clusters of Bergmite on its back as it swims among the icebergs.',
  height: 6.07,
  weight: 1113.3,
  category: 'Iceberg',
  hp: 40,
  speed: 10,
  attack: 46.67,
  defense: 73.33,
  image: '713.png'
}, {
  abilities: ['Own tempo', 'Ice body'],
  name: 'Noibat',
  description: 'After nightfall, they emerge from the caves they nest in during the day. Using their ultrasonic waves, they go on the hunt for ripened fruit.',
  height: 6.07,
  weight: 1113.3,
  category: 'Iceberg',
  hp: 20,
  speed: 26.67,
  attack: 10,
  defense: 20,
  image: '714.png'
}, {
  abilities: ['Frisk', 'Infiltrator'],
  name: 'Noivern',
  description: 'Aggressive and cruel, this Pokémon will ruthlessly torment enemies that are helpless in the dark.',
  height: 4.11,
  weight: 187.4,
  category: 'Sound wave',
  hp: 33.33,
  speed: 53.33,
  attack: 33.33,
  defense: 33.33,
  image: '715.png'
}, {
  abilities: ['Fairy aura'],
  name: 'Xerneas',
  description: 'Legends say it can share eternal life. It slept for a thousand years in the form of a tree before its revival.',
  height: 9.10,
  weight: 474,
  category: 'Life',
  hp: 53.33,
  speed: 40,
  attack: 53.33,
  defense: 40,
  image: '716.png'
}, {
  abilities: ['Dark aura'],
  name: 'Yveltal',
  description: 'Legends say it can share eternal life. It slept for a thousand years in the form of a tree before its revival.',
  height: 19.00,
  weight: 447.5,
  category: 'Destruction',
  hp: 53.33,
  speed: 40,
  attack: 53.33,
  defense: 40,
  image: '717.png'
}, {
  abilities: ['Aura break'],
  name: 'Zygarde',
  description: 'This is Zygarde’s form when about half of its pieces have been assembled. It plays the role of monitoring the ecosystem.',
  height: 16.05,
  weight: 672.4,
  category: 'Order',
  hp: 46.67,
  speed: 40,
  attack: 40,
  defense: 53.33,
  image: '718.png'
}, {
  abilities: ['Clear body'],
  name: 'Diancie',
  description: 'A sudden transformation of Carbink, its pink, glimmering body is said to be the loveliest sight in the whole world.',
  height: 2.04,
  weight: 19.4,
  category: 'Jewel',
  hp: 20.01,
  speed: 20.01,
  attack: 40.02,
  defense: 60.03,
  image: '719.png'
}, {
  abilities: ['Magician'],
  name: 'Hoopa',
  description: 'In its true form, it possesses a huge amount of power. Legends of its avarice tell how it once carried off an entire castle to gain the treasure hidden within.',
  height: 1.08,
  weight: 19.8,
  category: 'Mischief',
  hp: 33.35,
  speed: 33.35,
  attack: 46.69,
  defense: 26.68,
  image: '720.png'
}, {
  abilities: ['Water Absorb'],
  name: 'Volcanion',
  description: 'It lets out billows of steam and disappears into the dense fog. It’s said to live in mountains where humans do not tread.',
  height: 5.07,
  weight: 429.9,
  category: 'Steam',
  hp: 33.35,
  speed: 33.35,
  attack: 46.69,
  defense: 26.68,
  image: '721.png'
}

];

const fs = require('fs');
const path = require('path');
const copyDir = require('copy-dir');

const from = path.resolve('./migrations/images');
const target = path.resolve('./build/images');

module.exports = {
  async up(db, client) {
    console.log(target);
    if (!fs.existsSync(target)) {
      fs.mkdirSync(target);
    }
    copyDir.sync(from, target);
    const session = client.startSession();
    try {
      await session.withTransaction(async () => {
        await db
          .collection('pokemons')
          .insertMany(data);
      });
    } finally {
      await session.endSession();
    }
  },

  async down(db, client) {
    const session = client.startSession();
    try {
      await session.withTransaction(async () => {
        await db.dropCollection('pokemons');
      });
    } finally {
      await session.endSession();
    }
  }
};
